{% extends 'ClassCentralSiteBundle::base.html.twig' %}

{% block headmeta %}
    <title>{{provider.name}} - MOOCs/free online courses list | Class Central</title>
    <meta name="description"
          content="List of {{provider.name}} free online courses/MOOCs aggregated by Class Central. Courses are categorized according to start dates into Recently Started, Just Announced, Upcoming, Self Paced, Ongoing, and Finished"/>

    <meta property="og:title" content="List of {{provider.name}} free online courses/MOOCs | Class Central" />
    <meta property="og:url" content="{{ baseurl }}{{ path('ClassCentralSiteBundle_initiative',{'type': provider.code}) }}" />
    {% if pageInfo.imageUrl %}
        <meta property="og:image" content="{{ rackspace_cdn_base_url }}{{ pageInfo.imageUrl }}">
    {% else %}
        <meta property="og:image" content="https://www.class-central.com/bundles/classcentralsite/slashpixel/images/ccprofilepic.png">
    {% endif %}
    <meta property="og:description" content="List of {{provider.name}} free online courses/MOOCs aggregated by Class Central. Courses are categorized according to start dates into Recently Started, Just Announced, Upcoming, Self Paced, Ongoing, and Finished" />
    <meta property="og:type" content="website" />

    <!-- Twitter card integration -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@classcentral">
    <meta name="twitter:title" content="List of {{provider.name}} free online courses/MOOCs">
    <meta name="twitter:description" content="List of {{provider.name}} free online courses/MOOCs aggregated by Class Central">
    <meta name="twitter:domain" content="www.class-central.com">

    {# paginated content #}
    {% set totalPages = (results.hits.total/50)|round(0,'ceil')  %}
    {{ app.request.baseUrl }}
    {% if pageNo < totalPages %}
        <link rel="next" href="{{ path(app.request.attributes.get('_route'),
            app.request.attributes.get('_route_params')|merge(app.request.query.all|merge({'page':pageNo + 1})))  }}" />
    {% endif %}
    {% if pageNo > 1 %}
        {% if pageNo == 2 %}
            {# remove page=1 from the url #}
            <link rel="prev" href="{{ path(app.request.attributes.get('_route'),
            app.request.attributes.get('_route_params')|merge(app.request.query.all|merge({'page':null})))  }}" />
        {% else %}
            <link rel="prev" href="{{ path(app.request.attributes.get('_route'),
            app.request.attributes.get('_route_params')|merge(app.request.query.all|merge({'page':pageNo - 1})))  }}" />
        {% endif %}
    {% endif %}

{% endblock %}

{%  block content %}

    {% include 'ClassCentralSiteBundle:Helpers:pageHeader.html.twig' with {'info':pageInfo} %}

    <section class="courses">
        <h2 class="section-heading">
            <span>Courses</span>
        </h2>
        <div id="filter-wrap">
            <div class="mobile-filter-btn-wrap">
                <a href="#" class="mobile-filter-btn">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
            </div>
            <div class="row">
                <div class="col-sm-4 col-lg-3 filter-column">
                    {% include 'ClassCentralSiteBundle:Helpers:filters.html.twig' with {'offSubjects':allSubjects,'offLanguages':allLanguages, 'offSessions' : allSessions } %}
                </div>
                <div class="col-sm-8 col-lg-9 table-column">
                    <div class="tables-wrap">
                        {% include 'ClassCentralSiteBundle:Helpers:course.table.html.twig' with{'results':results,'tableId':'providertable', 'showHeader':true } %}
                        {% include 'ClassCentralSiteBundle:Helpers:loadMoreCourses.html.twig' with{'nextPage':pageNo + 1,'totalCourses': results.hits.total } %}

                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}